# =============================================================================
# Zuralog Cloud Brain — Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values.
# NEVER commit .env to version control.
# =============================================================================

# --- Database (Local: Docker Compose / Production: Supabase) ---
DATABASE_URL=postgresql+asyncpg://zuralog:zuralog@localhost:5432/zuralog

# --- Redis (Local: Docker Compose / Production: Upstash) ---
REDIS_URL=redis://localhost:6379/0

# --- Upstash Redis REST (CacheService — HTTP REST client, separate from REDIS_URL) ---
# Used by CacheService for response caching. Optional for local dev — caching degrades to no-op.
# Production values are the same database as REDIS_URL, just accessed via HTTP REST instead of TCP.
# Get both values from Bitwarden: search "Upstash ZuraLog Redis" → "REST URL" and "REST Token"
UPSTASH_REDIS_REST_URL=get-from-bitwarden
UPSTASH_REDIS_REST_TOKEN=get-from-bitwarden
# Cache TTL defaults (seconds) — optional, these are the built-in defaults
# CACHE_TTL_SHORT=300
# CACHE_TTL_MEDIUM=900
# CACHE_TTL_LONG=86400

# --- Supabase (Used for Auth + RLS in production) ---
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-key

# --- Google OAuth (Social Sign-In) ---
# Web Application OAuth 2.0 client from console.cloud.google.com
# Required for Google Sign-In id_token validation via Supabase GoTrue
GOOGLE_WEB_CLIENT_ID=your-web-client-id.apps.googleusercontent.com
GOOGLE_WEB_CLIENT_SECRET=your-web-client-secret

# --- Strava (Phase 1.6 / 1.7) ---
# Register your app at https://www.strava.com/settings/api
# Set Authorization Callback Domain to: localhost (dev) or your production domain
STRAVA_CLIENT_ID=your_client_id_here
STRAVA_CLIENT_SECRET=your_client_secret_here
STRAVA_REDIRECT_URI=zuralog://oauth/strava
# Random secret used to validate Strava webhook subscription requests (Phase 1.7)
# Must match the verify_token sent when registering the webhook subscription
STRAVA_WEBHOOK_VERIFY_TOKEN=your-random-verify-token-here

# --- Fitbit (Phase 5.1) ---
# Register your app at https://dev.fitbit.com/apps
# Set the OAuth 2.0 Redirect URL to: zuralog://oauth/fitbit (dev) or your production URI
FITBIT_CLIENT_ID=your_fitbit_client_id_here
FITBIT_CLIENT_SECRET=your_fitbit_client_secret_here
FITBIT_REDIRECT_URI=zuralog://oauth/fitbit
# Random code used to validate Fitbit webhook subscription verification requests
FITBIT_WEBHOOK_VERIFY_CODE=your-random-verify-code-here
# Subscriber ID assigned when registering the Fitbit webhook subscription
FITBIT_WEBHOOK_SUBSCRIBER_ID=1

# --- Oura Ring (Phase 5.2) ---
# Register your app at https://cloud.ouraring.com/oauth/applications
# Set the Redirect URI to: zuralog://oauth/oura
# Apps are limited to 10 users until reviewed and approved by Oura (submit for review early).
OURA_CLIENT_ID=
OURA_CLIENT_SECRET=
OURA_REDIRECT_URI=zuralog://oauth/oura
# Random token used to verify Oura webhook subscriptions (set when creating subscriptions)
OURA_WEBHOOK_VERIFICATION_TOKEN=
# Set to true to use Oura sandbox API (/v2/sandbox/) for development (no real ring needed)
OURA_USE_SANDBOX=false

# --- Pinecone (Phase 1.8 — vector memory, deferred to production) ---
PINECONE_API_KEY=your-pinecone-api-key

# --- OpenAI (Phase 1.8 — embeddings / LLM fallback) ---
OPENAI_API_KEY=your-openai-api-key

# --- OpenRouter / AI Brain (Phase 1.8) ---
OPENROUTER_API_KEY=your-openrouter-api-key
OPENROUTER_REFERER=https://zuralog.app
OPENROUTER_TITLE=Zuralog
OPENROUTER_MODEL=moonshotai/kimi-k2.5

# --- Firebase Cloud Messaging (Phase 1.9 / 1.10) ---
# Path to Firebase service-account JSON for push notifications
FCM_CREDENTIALS_PATH=path/to/firebase-service-account.json

# --- RevenueCat (Phase 1.13) ---
# Webhook auth secret configured in RevenueCat Dashboard -> Webhooks
REVENUECAT_WEBHOOK_SECRET=your_webhook_auth_secret_here
# RevenueCat V1 Secret API key for server-side subscriber lookup
REVENUECAT_API_KEY=your_secret_api_key_here

# --- PostHog Product Analytics ---
# Project API key from PostHog → Project Settings → Project API Key
# Safe to use in backend — it's a write-only capture key, not a secret.
# Optional for local dev — analytics degrades to no-op when empty.
POSTHOG_API_KEY=
POSTHOG_HOST=https://us.i.posthog.com

# --- Sentry Error Monitoring ---
SENTRY_DSN=
SENTRY_TRACES_SAMPLE_RATE=1.0
SENTRY_PROFILES_SAMPLE_RATE=0.25

# --- Application ---
APP_ENV=development
APP_DEBUG=true

# --- CORS Origins ---
# Comma-separated list of allowed origins. Use "*" for dev.
# Example: ALLOWED_ORIGINS=https://zuralog.com,https://www.zuralog.com
ALLOWED_ORIGINS=*

# --- Firebase (Production/Railway) ---
# Paste the ENTIRE Firebase service-account JSON as a single-line string.
# This takes priority over FCM_CREDENTIALS_PATH when both are set.
# FIREBASE_CREDENTIALS_JSON={"type":"service_account","project_id":"..."}
FIREBASE_CREDENTIALS_JSON=
