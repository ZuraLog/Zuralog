# =============================================================================
# Zuralog Cloud Brain — Railway Config: Celery Worker
# =============================================================================
# Used by the "Celery Worker" Railway service.
# In Railway dashboard: Settings → Source → Config File Path:
#   cloud-brain/railway.celery-worker.toml
#
# The worker processes async tasks (Strava webhooks, Fitbit syncs, etc.).
# No healthcheck — Celery processes don't serve HTTP.
# No preDeployCommand — migrations are handled by the web (Zuralog) service.
# =============================================================================

[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "celery -A app.worker worker --loglevel=info --concurrency=2"

# No healthcheckPath — Celery is not an HTTP service.
# Railway will consider the service healthy once the process starts.

restartPolicyType = "on_failure"
restartPolicyMaxRetries = 5
